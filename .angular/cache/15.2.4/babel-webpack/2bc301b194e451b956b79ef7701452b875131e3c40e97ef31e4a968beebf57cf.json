{"ast":null,"code":"import { map, take } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class AuthGaurd {\n  constructor(autService, router) {\n    this.autService = autService;\n    this.router = router;\n  }\n  canActivate(route, state) {\n    return this.autService.user.pipe(take(1),\n    // TO add only the latest user and \n    map(user => {\n      const isAuth = !!user;\n      if (isAuth) {\n        return true;\n      }\n      return this.router.createUrlTree(['/auth']);\n    })\n    // , tap(isAuth =>{\n    //     if(!isAuth){\n    //         this.router.navigate(['/auth']);\n    //     }\n    // })\n    );\n  }\n}\n\nAuthGaurd.ɵfac = function AuthGaurd_Factory(t) {\n  return new (t || AuthGaurd)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Router));\n};\nAuthGaurd.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthGaurd,\n  factory: AuthGaurd.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,GAAG,EAAcC,IAAI,QAAa,MAAM;;;;AAMjD,OAAM,MAAOC,SAAS;EAElBC,YAAoBC,UAAuB,EAAUC,MAAc;IAA/C,eAAU,GAAVD,UAAU;IAAuB,WAAM,GAANC,MAAM;EAG3D;EAEAC,WAAW,CACPC,KAA6B,EAC7BC,KAA0B;IAE1B,OAAO,IAAI,CAACJ,UAAU,CAACK,IAAI,CAACC,IAAI,CAC5BT,IAAI,CAAC,CAAC,CAAC;IAAE;IACTD,GAAG,CAACS,IAAI,IAAE;MACV,MAAME,MAAM,GAAG,CAAC,CAACF,IAAI;MACrB,IAAGE,MAAM,EAAE;QACP,OAAO,IAAI;;MAEf,OAAO,IAAI,CAACN,MAAM,CAACO,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC;IAC/C,CAAC;IACD;IACA;IACA;IACA;IACA;IAAA,CACC;EACL;;;AA1BSV,SAAS;mBAATA,SAAS;AAAA;AAATA,SAAS;SAATA,SAAS;EAAAW,SAATX,SAAS;EAAAY,YAFN;AAAM","names":["map","take","AuthGaurd","constructor","autService","router","canActivate","route","state","user","pipe","isAuth","createUrlTree","factory","providedIn"],"sourceRoot":"","sources":["/home/bhavika/Documents/bhavika/Angular/Project/src/app/auth/auth.gaurd.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from \"@angular/router\";\nimport { map, Observable, take, tap } from \"rxjs\";\nimport { AuthService } from \"./auth.service\";\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthGaurd implements CanActivate{\n    \n    constructor(private autService: AuthService, private router: Router)\n    {\n\n    }\n\n    canActivate(\n        route: ActivatedRouteSnapshot, \n        state: RouterStateSnapshot)\n    : boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\n        return this.autService.user.pipe(\n            take(1), // TO add only the latest user and \n            map(user=>{\n            const isAuth = !!user;\n            if(isAuth) {\n                return true;\n            }\n            return this.router.createUrlTree(['/auth']);\n        })\n        // , tap(isAuth =>{\n        //     if(!isAuth){\n        //         this.router.navigate(['/auth']);\n        //     }\n        // })\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}